<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LABSE V7.1 - REPORTE FINAL</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { background-color: #0f172a; color: #e2e8f0; font-family: 'Segoe UI', sans-serif; overflow: hidden; }
        .oculto { display: none !important; }
        .visible { display: flex !important; }
        .fade-in { animation: fadeIn 0.3s ease-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(-10px); } to { opacity: 1; transform: translateY(0); } }
        .scroll-fino::-webkit-scrollbar { width: 6px; }
        .scroll-fino::-webkit-scrollbar-thumb { background: #475569; border-radius: 4px; }
    </style>
</head>
<body class="h-screen w-screen flex flex-col">

    <div id="vista-login" class="visible fixed inset-0 z-50 w-full h-full bg-slate-900 items-center justify-center fade-in">
        <div class="bg-slate-800 p-8 rounded-xl shadow-2xl border border-slate-700 w-96 text-center">
            <h1 class="text-4xl font-black text-blue-500 mb-2 tracking-tighter">LABSE</h1>
            <p class="text-slate-400 text-sm mb-6">Gesti√≥n V7.1 (Reporte Tabla)</p>
            <div class="space-y-4">
                <input type="text" id="user" placeholder="Usuario" class="w-full bg-slate-700 text-white p-3 rounded border border-slate-600 focus:border-blue-500 outline-none">
                <input type="password" id="pass" placeholder="Contrase√±a" class="w-full bg-slate-700 text-white p-3 rounded border border-slate-600 focus:border-blue-500 outline-none">
                <button type="button" onclick="login()" class="w-full bg-blue-600 hover:bg-blue-500 text-white font-bold py-3 rounded shadow-lg transition transform active:scale-95">
                    INICIAR SISTEMA
                </button>
            </div>
            <p class="mt-4 text-xs text-slate-500">Usuarios: admin, camila</p>
        </div>
    </div>

    <div id="vista-dashboard" class="oculto w-full h-full flex-col relative bg-slate-900 fade-in">
        <div class="w-full p-4 flex justify-between items-center bg-slate-800 border-b border-slate-700">
            <div class="font-bold text-blue-400 tracking-wider">LABSE SYSTEM</div>
            <div class="flex items-center gap-4">
                <span id="user-display" class="text-slate-400 text-sm font-bold border-r border-slate-600 pr-4">Usuario: Admin</span>
                <button onclick="logout()" class="text-red-400 text-sm hover:text-red-300 transition flex items-center gap-1">‚úï Salir</button>
            </div>
        </div>
        <div class="flex-1 flex flex-col items-center justify-center p-6">
            <h2 class="text-3xl font-bold text-white mb-8">Panel de Control</h2>
            <button onclick="generarOrden()" class="w-full max-w-lg bg-gradient-to-r from-blue-600 to-blue-800 hover:from-blue-500 hover:to-blue-700 text-white font-bold py-5 rounded-2xl shadow-xl border border-blue-400/30 mb-10 flex items-center justify-center gap-3 transition transform hover:scale-105">
                üìÑ GENERAR ORDEN DE COMPRA (Formato Tabla)
            </button>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6 w-full max-w-4xl">
                <div onclick="abrirInventario('Insumos')" class="bg-slate-800 p-6 rounded-xl border border-slate-700 hover:border-blue-500 cursor-pointer transition hover:bg-slate-750 group relative overflow-hidden">
                    <div class="absolute top-0 right-0 p-4 opacity-10 group-hover:opacity-20 transition text-6xl">üì¶</div>
                    <h3 class="text-xl font-bold text-blue-200 group-hover:text-blue-400">Insumos</h3>
                </div>
                <div onclick="abrirInventario('Herramientas')" class="bg-slate-800 p-6 rounded-xl border border-slate-700 hover:border-indigo-500 cursor-pointer transition hover:bg-slate-750 group relative overflow-hidden">
                    <div class="absolute top-0 right-0 p-4 opacity-10 group-hover:opacity-20 transition text-6xl">üîß</div>
                    <h3 class="text-xl font-bold text-indigo-200 group-hover:text-indigo-400">Herramientas</h3>
                </div>
            </div>
            <button onclick="borrarBaseDatos()" class="mt-12 text-xs text-red-900 hover:text-red-500 underline opacity-50 hover:opacity-100 transition">Resetear Base de Datos</button>
        </div>
    </div>

    <div id="vista-tabla" class="oculto w-full h-full flex-col bg-slate-900 fade-in">
        <div class="p-4 bg-slate-800 border-b border-slate-700 flex justify-between items-center shadow-lg z-10">
            <div class="flex items-center gap-4">
                <button onclick="volver()" class="bg-slate-700 hover:bg-slate-600 px-3 py-1 rounded text-sm text-white border border-slate-600">‚Üê Volver</button>
                <h2 id="titulo-cat" class="text-xl font-bold text-blue-400">Inventario</h2>
            </div>
            <button onclick="mostrarModal()" class="bg-emerald-600 hover:bg-emerald-500 text-white px-4 py-2 rounded font-bold text-sm shadow-lg shadow-emerald-900/20 flex items-center gap-2">+ NUEVO √çTEM</button>
        </div>
        <div class="flex-1 overflow-auto p-4">
            <div class="bg-slate-800 rounded-lg border border-slate-700 overflow-hidden">
                <table class="w-full text-left border-collapse">
                    <thead class="bg-slate-900 text-slate-400 uppercase text-xs sticky top-0 z-10">
                        <tr>
                            <th class="p-4 border-b border-slate-700 font-bold">C√≥d.</th>
                            <th class="p-4 border-b border-slate-700 font-bold">Nombre</th>
                            <th class="p-4 border-b border-slate-700 font-bold w-1/4">Proveedores</th>
                            <th class="p-4 border-b border-slate-700 text-center font-bold">Stock</th>
                            <th class="p-4 border-b border-slate-700 text-center font-bold">Estado</th>
                            <th class="p-4 border-b border-slate-700 text-right font-bold">Acci√≥n</th>
                        </tr>
                    </thead>
                    <tbody id="tabla-body" class="divide-y divide-slate-700 text-sm"></tbody>
                </table>
                <div id="vacio-msg" class="text-center p-12 text-slate-500 hidden">
                    <p class="text-lg mb-2">üì≠</p>
                    <p>No hay productos registrados.</p>
                </div>
            </div>
        </div>
    </div>

    <div id="modal" class="oculto fixed inset-0 z-[60] bg-black/90 items-center justify-center backdrop-blur-sm fade-in overflow-y-auto py-10">
        <div class="bg-slate-800 p-6 rounded-xl border border-slate-600 w-full max-w-2xl shadow-2xl my-auto">
            <div class="flex justify-between items-center mb-6 border-b border-slate-700 pb-2">
                <h3 class="text-xl font-bold text-white">Nuevo Producto</h3>
                <button onclick="cerrarModal()" class="text-slate-500 hover:text-white text-2xl">√ó</button>
            </div>
            
            <form onsubmit="guardarProducto(event)">
                <div class="bg-slate-900/50 p-4 rounded-lg mb-6 border border-slate-700">
                    <h4 class="text-blue-400 text-sm font-bold uppercase mb-3">1. Informaci√≥n del √çtem</h4>
                    <div class="flex gap-4 mb-3">
                        <div class="w-1/4">
                            <label class="block text-xs text-slate-400 mb-1">C√ìDIGO *</label>
                            <input type="text" id="m-cod" placeholder="001" required class="w-full bg-slate-800 text-white border border-slate-600 p-2 rounded focus:border-blue-500 outline-none">
                        </div>
                        <div class="w-3/4">
                            <label class="block text-xs text-slate-400 mb-1">NOMBRE *</label>
                            <input type="text" id="m-nombre" required class="w-full bg-slate-800 text-white border border-slate-600 p-2 rounded focus:border-blue-500 outline-none">
                        </div>
                    </div>
                    <div class="flex gap-4">
                        <div class="w-1/3">
                            <label class="block text-xs text-slate-400 mb-1">STOCK *</label>
                            <input type="number" id="m-cant" required class="w-full bg-slate-800 text-white border border-slate-600 p-2 rounded focus:border-blue-500 outline-none">
                        </div>
                        <div class="w-1/3">
                            <label class="block text-xs text-slate-400 mb-1">M√çNIMO *</label>
                            <input type="number" id="m-min" required class="w-full bg-slate-800 text-white border border-slate-600 p-2 rounded focus:border-blue-500 outline-none">
                        </div>
                        <div class="w-1/3">
                            <label class="block text-xs text-slate-400 mb-1">UNIDAD</label>
                            <input type="text" id="m-uni" placeholder="u." class="w-full bg-slate-800 text-white border border-slate-600 p-2 rounded focus:border-blue-500 outline-none">
                        </div>
                    </div>
                </div>

                <div class="bg-slate-900/50 p-4 rounded-lg mb-6 border border-slate-700">
                    <h4 class="text-emerald-400 text-sm font-bold uppercase mb-3">2. Proveedor (Opcional)</h4>
                    <div class="grid grid-cols-2 gap-3 mb-3">
                        <input type="text" id="p-nombre" placeholder="Nombre Empresa" class="bg-slate-800 text-white border border-slate-600 p-2 rounded text-sm">
                        <input type="text" id="p-tel" placeholder="Tel√©fono" class="bg-slate-800 text-white border border-slate-600 p-2 rounded text-sm">
                        <input type="email" id="p-mail" placeholder="Email" class="bg-slate-800 text-white border border-slate-600 p-2 rounded text-sm">
                        <input type="text" id="p-web" placeholder="Web" class="bg-slate-800 text-white border border-slate-600 p-2 rounded text-sm">
                        <input type="text" id="p-loc" placeholder="Direcci√≥n" class="bg-slate-800 text-white border border-slate-600 p-2 rounded text-sm col-span-2">
                    </div>
                    
                    <button type="button" onclick="agregarProveedorTemporal()" class="w-full bg-slate-700 hover:bg-slate-600 text-emerald-400 border border-emerald-900/50 font-bold py-2 rounded text-sm mb-4 transition">
                        ‚ñº AGREGAR A LA LISTA
                    </
